(this["webpackJsonpreact-vacancy"]=this["webpackJsonpreact-vacancy"]||[]).push([[0],{12:function(e,n,t){e.exports={page:"App_page__1zI64",tableWrapper:"App_tableWrapper__1PEH0",loader:"App_loader__1a8kr",errorMsg:"App_errorMsg__2fuVX",observableElement:"App_observableElement__9Xcz5"}},41:function(e,n,t){},66:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(17),i=t.n(c),o=(t(41),t(15)),s=t(20),u=t(16),l=t(8),d=t.n(l),b=t(2),f=function(e){var n=e.url,t=void 0===n?"":n,r=e.children,a=e.withMobileHide;return Object(b.jsx)("div",{className:"".concat(d.a.cell," ").concat(a?d.a.mobileHidden:""),onClick:function(){t.length&&(window.location.href=t)},style:{cursor:t.length?"pointer":"default",color:t.length?"blue":"black"},children:r})},h=function(e){var n=e.children,t=e.style,r=void 0===t?{}:t,a=e.withMobileHide,c=void 0!==a&&a,i=e.onClick;return Object(b.jsx)("div",{className:"".concat(d.a.head," ").concat(c?d.a.mobileHidden:""),style:r,onClick:function(){i&&i()},children:n})},j=function(e){var n=e.rowsData,t=e.headNames,r=e.headsWithSort,c=void 0===r?[]:r,i=e.cellUrls,s=void 0===i?[]:i,l=e.columnWidths,j=void 0===l?[]:l,m=e.columnsWithMobileHide,p=void 0===m?[]:m,g=e.mobileSortBtnData,w=void 0===g?null:g,v=e.sortFunctions,O=a.a.useState(n),_=Object(o.a)(O,2),N=_[0],x=_[1],M=a.a.useRef(t.map((function(e){return"ascending"})));a.a.useEffect((function(){x(n)}),[n]);var E=a.a.useCallback((function(e){var t=M.current[e],r=Object(u.a)(n);v&&v[e]?r.sort((function(n,t){return v[e](n[e],t[e])})):r.sort((function(n,t){var r=n[e],a=t[e];return r&&a?r.localeCompare(a):r&&!a?1:!r&&a?-1:0})),"descending"===t&&r.reverse(),M.current=M.current.map((function(n,t){return t===e?"ascending"===n?"descending":"ascending":n})),x(r)}),[n,v]),S=a.a.useMemo((function(){return t.map((function(e,n){return Object(b.jsx)(h,{onClick:function(){return E(n)},withMobileHide:p.includes(n),style:{width:j[n]?j[n]:"auto",cursor:c.includes(e)?"pointer":"default"},children:e},n)}))}),[t,c,p,j,E]),T=a.a.useMemo((function(){return N.map((function(e,n){return Object(b.jsx)("div",{className:d.a.row,children:e.map((function(e,t){return Object(b.jsx)(f,{url:s[t]&&s[t][n]?s[t][n]:"",withMobileHide:p.includes(t),children:e},t)}))},n)}))}),[N,s,p]);return Object(b.jsxs)("div",{className:d.a.table,children:[Object(b.jsx)("div",{className:d.a.row,children:S}),T,w&&Object(b.jsx)("div",{className:d.a.sortBtnWrapper,children:Object(b.jsx)("button",{className:d.a.sortBtn,onClick:function(){return E(w.sortedColumn)},children:w.name})})]})},m=a.a.memo(j),p=function(e){return e.loadingNews},g=function(e){return e.newsData},w=function(e){return e.errorMessage},v=t(12),O=t.n(v),_=t(10),N=t(34),x=t.n(N).a.create({baseURL:"https://api.hnpwa.com/v0/"}),M=function(e){return x.get("/news/".concat(e,".json")).then((function(e){return e.data}))},E={newsData:[],loadingNews:!1,errorMessage:""},S="SET_NEWS",T="SET_LOADING_NEWS",y="SET_ERROR_MESSAGE",D=function(e){return{type:T,isLoadingNews:e}},C=function(e){return{type:y,errorMsg:e}},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case S:return Object(_.a)(Object(_.a)({},e),{},{newsData:[].concat(Object(u.a)(e.newsData),Object(u.a)(n.newsData))});case T:return Object(_.a)(Object(_.a)({},e),{},{loadingNews:n.isLoadingNews});case y:return Object(_.a)(Object(_.a)({},e),{},{errorMessage:n.errorMsg});default:return Object(_.a)({},e)}},k=Object(s.b)((function(e){return{news:g(e.news),loadingNews:p(e.news),loadingNewsErrorMsg:w(e.news)}}),{fetchNews:function(e){return function(n){n(D(!0)),M(e).then((function(e){n({type:S,newsData:e}),n(C(""))})).catch((function(e){return n(C(e.message))})).finally((function(){return n(D(!1))}))}}})((function(e){var n=e.news,t=e.loadingNews,r=e.loadingNewsErrorMsg,c=e.fetchNews,i=a.a.useState(1),s=Object(o.a)(i,2),u=s[0],l=s[1],d=a.a.useRef(null),f=a.a.useRef(),h=a.a.useRef(null);a.a.useEffect((function(){var e=d.current,n=new IntersectionObserver((function(e){Object(o.a)(e,1)[0].isIntersecting&&l((function(e){return e+1}))}),{threshold:1});f.current=n,e&&n.observe(e)}),[]),a.a.useEffect((function(){u>10?f.current&&d.current&&f.current.unobserve(d.current):c(u)}),[c,u]);var j=a.a.useMemo((function(){return n.map((function(e){return[e.time_ago,e.title,e.domain]}))}),[n]),p=a.a.useMemo((function(){return n.map((function(e){return e.url}))}),[n]),g=a.a.useCallback((function(e,n){var t=Number(e.substring(0,e.indexOf(" "))),r=Number(n.substring(0,n.indexOf(" "))),a=function(e){return e.includes("a day")||e.includes("an hour")||e.includes("a minute")||e.includes("a second")};a(e)&&(t=1),a(n)&&(r=1);var c=function(e){return e.includes("year")?6:e.includes("week")?5:e.includes("day")?4:e.includes("hour")?3:e.includes("minute")?2:e.includes("second")&&1},i=c(e),o=c(n);return i>o?1:o>i?-1:t-r}),[]);return Object(b.jsxs)("div",{className:O.a.page,children:[n&&Object(b.jsx)("div",{className:O.a.tableWrapper,ref:h,children:Object(b.jsx)(m,{rowsData:j,headNames:["Time added","Title","Domain"],headsWithSort:["Time added","Title","Domain"],sortFunctions:[g],columnWidths:["15%","auto","auto"],columnsWithMobileHide:[0,2],cellUrls:[[],p,[]],mobileSortBtnData:{name:"Sort by date",sortedColumn:0}})}),t?Object(b.jsx)("h3",{className:O.a.loader,children:"Loading news..."}):r.length>0&&Object(b.jsx)("h3",{className:O.a.errorMsg,children:r}),Object(b.jsx)("div",{id:O.a.observableElement,ref:d})]})})),H=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,67)).then((function(n){var t=n.getCLS,r=n.getFID,a=n.getFCP,c=n.getLCP,i=n.getTTFB;t(e),r(e),a(e),c(e),i(e)}))},B=t(21),L=t(35),R=Object(B.b)({news:W}),A=Object(B.c)(R,Object(B.a)(L.a)),I=t(36),F=t(3);i.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(s.a,{store:A,children:Object(b.jsx)(I.a,{children:Object(b.jsx)(F.a,{exact:!0,path:"/",render:function(){return Object(b.jsx)(k,{})}})})})}),document.getElementById("root")),H()},8:function(e,n,t){e.exports={table:"Table_table__1ozS8",row:"Table_row__ToSOf",cell:"Table_cell__4C-Dt",head:"Table_head__1diNJ",sortBtnWrapper:"Table_sortBtnWrapper__1LLVw",sortBtn:"Table_sortBtn__295Vl",mobileHidden:"Table_mobileHidden__2Iq6H"}}},[[66,1,2]]]);
//# sourceMappingURL=main.dd6bcaa4.chunk.js.map