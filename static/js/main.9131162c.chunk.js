(this["webpackJsonpreact-vacancy"]=this["webpackJsonpreact-vacancy"]||[]).push([[0],{3:function(e,n,t){e.exports={table:"Table_table__1ozS8",row:"Table_row__ToSOf",cell:"Table_cell__4C-Dt",head:"Table_head__1diNJ",sortBtnWrapper:"Table_sortBtnWrapper__1LLVw",sortBtn:"Table_sortBtn__295Vl",mobileHidden:"Table_mobileHidden__2Iq6H"}},30:function(e,n,t){},5:function(e,n,t){e.exports={page:"App_page__1zI64",tableWrapper:"App_tableWrapper__1PEH0",loader:"App_loader__1a8kr",errorMsg:"App_errorMsg__2fuVX",observableElement:"App_observableElement__9Xcz5"}},54:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(9),i=t.n(c),s=(t(30),t(7)),o=t(11),u=t(8),l=t(3),d=t.n(l),b=t(1),f=function(e){var n=e.url,t=void 0===n?"":n,r=e.children,a=e.withMobileHide;return Object(b.jsx)("div",{className:"".concat(d.a.cell," ").concat(a?d.a.mobileHidden:""),onClick:function(){t.length&&(window.location.href=t)},style:{cursor:t.length?"pointer":"default",color:t.length?"blue":"black"},children:r})},h=function(e){var n=e.children,t=e.style,r=void 0===t?{}:t,a=e.withMobileHide,c=void 0!==a&&a,i=e.onClick;return Object(b.jsx)("div",{className:"".concat(d.a.head," ").concat(c?d.a.mobileHidden:""),style:r,onClick:function(){i&&i()},children:n})},m=function(e){var n=e.rowsData,t=e.headNames,r=e.headsWithSort,c=void 0===r?[]:r,i=e.cellUrls,o=void 0===i?[]:i,l=e.columnWidths,m=void 0===l?[]:l,j=e.columnsWithMobileHide,p=void 0===j?[]:j,N=e.mobileSortBtnData,g=void 0===N?null:N,w=e.sortFunctions,v=a.a.useState(n),_=Object(s.a)(v,2),O=_[0],x=_[1],M=a.a.useRef(t.map((function(e){return"ascending"}))),y=a.a.useCallback((function(e){var t=M.current[e],r=Object(u.a)(n);w&&w[e]?r.sort((function(n,t){return w[e](n[e],t[e])})):r.sort((function(n,t){var r=n[e],a=t[e];return r&&a?r.localeCompare(a):r&&!a?1:!r&&a?-1:0})),"descending"===t&&r.reverse(),M.current=M.current.map((function(n,t){return t===e?"ascending"===n?"descending":"ascending":n})),x(r)}),[n,w]),S=a.a.useMemo((function(){return t.map((function(e,n){return Object(b.jsx)(h,{onClick:function(){return y(n)},withMobileHide:p.includes(n),style:{width:m[n]?m[n]:"auto",cursor:c.includes(e)?"pointer":"default"},children:e},n)}))}),[t,c,p,m,y]),E=a.a.useMemo((function(){return O.map((function(e,n){return Object(b.jsx)("div",{className:d.a.row,children:e.map((function(e,t){return Object(b.jsx)(f,{url:o[t]&&o[t][n]?o[t][n]:"",withMobileHide:p.includes(t),children:e},t)}))},n)}))}),[O,o,p]);return Object(b.jsxs)("div",{className:d.a.table,children:[Object(b.jsx)("div",{className:d.a.row,children:S}),E,g&&Object(b.jsx)("div",{className:d.a.sortBtnWrapper,children:Object(b.jsx)("button",{className:d.a.sortBtn,onClick:function(){return y(g.sortedColumn)},children:g.name})})]})},j=a.a.memo(m),p=function(e){return e.loadingNews},N=function(e){return e.newsData},g=function(e){return e.errorMessage},w=t(5),v=t.n(w),_=t(4),O=t(24),x=t.n(O).a.create({baseURL:"https://api.hnpwa.com/v0/"}),M=function(e){return x.get("/news/".concat(e,".json")).then((function(e){return e.data}))},y={newsData:[],loadingNews:!1,errorMessage:""},S="SET_NEWS",E="SET_LOADING_NEWS",T="SET_ERROR_MESSAGE",D=function(e){return{type:E,isLoadingNews:e}},C=function(e){return{type:T,errorMsg:e}},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case S:return Object(_.a)(Object(_.a)({},e),{},{newsData:[].concat(Object(u.a)(e.newsData),Object(u.a)(n.newsData))});case E:return Object(_.a)(Object(_.a)({},e),{},{loadingNews:n.isLoadingNews});case T:return Object(_.a)(Object(_.a)({},e),{},{errorMessage:n.errorMsg});default:return Object(_.a)({},e)}},k=Object(o.b)((function(e){return{news:N(e.news),loadingNews:p(e.news),loadingNewsErrorMsg:g(e.news)}}),{fetchNews:function(e){return function(n){n(D(!0)),M(e).then((function(e){n({type:S,newsData:e}),n(C(""))})).catch((function(e){return n(C(e.message))})).finally((function(){return n(D(!1))}))}}})((function(e){var n=e.news,t=e.loadingNews,r=e.loadingNewsErrorMsg,c=e.fetchNews,i=a.a.useState(1),o=Object(s.a)(i,2),u=o[0],l=o[1],d=a.a.useRef(null),f=a.a.useRef(),h=a.a.useRef(null);a.a.useEffect((function(){var e=d.current,n=new IntersectionObserver((function(e){Object(s.a)(e,1)[0].isIntersecting&&l((function(e){return e+1}))}),{threshold:1});f.current=n,e&&n.observe(e)}),[]),a.a.useEffect((function(){u>10?f.current&&d.current&&f.current.unobserve(d.current):c(u)}),[c,u]);var m=a.a.useMemo((function(){return n.map((function(e){return[e.time_ago,e.title,e.domain]}))}),[n]),p=a.a.useMemo((function(){return n.map((function(e){return e.url}))}),[n]),N=a.a.useCallback((function(e,n){var t=Number(e.substring(0,e.indexOf(" "))),r=Number(n.substring(0,n.indexOf(" ")));if((e.includes("a day")||e.includes("an hour"))&&(t=1),(n.includes("a day")||n.includes("an hour"))&&(r=1),!Number.isNaN(t)&&Number.isNaN(r))return 1;if(Number.isNaN(t)&&!Number.isNaN(r))return-1;if(Number.isNaN(t)&&Number.isNaN(r))return 0;var a=e.includes("day"),c=n.includes("day");if(a&&c)return t-r;var i=e.includes("hour"),s=n.includes("hour");return a&&s?1:i&&c?-1:t-r}),[]);return Object(b.jsxs)("div",{className:v.a.page,children:[t?Object(b.jsx)("h3",{className:v.a.loader,children:"Loading news..."}):r.length>0?Object(b.jsx)("h3",{className:v.a.errorMsg,children:r}):Object(b.jsx)("div",{className:v.a.tableWrapper,ref:h,children:Object(b.jsx)(j,{rowsData:m,headNames:["Time added","Title","Domain"],headsWithSort:["Time added","Title","Domain"],sortFunctions:[N],columnWidths:["15%","auto","auto"],columnsWithMobileHide:[0,2],cellUrls:[[],p,[]],mobileSortBtnData:{name:"Sort by date",sortedColumn:0}})}),Object(b.jsx)("div",{id:v.a.observableElement,ref:d,style:{display:t?"none":"block"}})]})})),H=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,55)).then((function(n){var t=n.getCLS,r=n.getFID,a=n.getFCP,c=n.getLCP,i=n.getTTFB;t(e),r(e),a(e),c(e),i(e)}))},B=t(12),L=t(25),R=Object(B.b)({news:W}),A=Object(B.c)(R,Object(B.a)(L.a));i.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(o.a,{store:A,children:Object(b.jsx)(k,{})})}),document.getElementById("root")),H()}},[[54,1,2]]]);
//# sourceMappingURL=main.9131162c.chunk.js.map